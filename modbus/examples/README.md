# Modbus Monitor Examples

This directory contains examples and documentation for the Modbus monitoring service.

## Files Expected on BeagleBone

The actual monitoring service runs on the BeagleBone AI-64 and consists of:

- **`modbus_monitor.py`**: Main script that polls Modbus devices and writes to InfluxDB
- **`/etc/modbus_monitor/config.json`**: Configuration file generated by Django

## Configuration Format

The `config.json` file has the following structure:

```json
{
  "devices": {
    "device_1": {
      "name": "Main Energy Analyzer",
      "slave_id": 1,
      "parameters": {
        "768": ["Voltage L1-N", 10.0, "V", "uint16"],
        "770": ["Voltage L2-N", 10.0, "V", "uint16"]
      }
    }
  },
  "global_config": {
    "port": "/dev/ttyUSB0",
    "baudrate": 9600,
    "parity": "N",
    "stopbits": 1,
    "bytesize": 8,
    "timeout": 3
  }
}
```

## Integration Flow

1. **Django Admin** → Creates/modifies device configurations
2. **`generate_multi_device_config()`** → Generates JSON configuration
3. **`write_configuration_file()`** → Writes to `/etc/modbus_monitor/config.json` on BeagleBone
4. **modbus_monitor.py** → Reads config, polls devices, writes to InfluxDB
5. **Grafana** → Visualizes data from InfluxDB

## Adding Example Files

If you'd like to document the integration, place example files here:
- `config.example.json` - Sample configuration
- `modbus_monitor.example.py` - Example monitor script (if sharing)

